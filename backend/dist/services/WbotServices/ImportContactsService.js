'use strict';const a649_0xe660fe=a649_0x4193;function a649_0x4193(_0x1718b3,_0x32c13c){const _0x5e05cf=a649_0x5e05();return a649_0x4193=function(_0x4193c1,_0x130b7d){_0x4193c1=_0x4193c1-0xab;let _0x28651e=_0x5e05cf[_0x4193c1];return _0x28651e;},a649_0x4193(_0x1718b3,_0x32c13c);}function a649_0x5e05(){const _0x322442=['1184487SxyVZk','includes','../../utils/logger','join','isArray','getOwnPropertyDescriptor','5465997YgCRSL','call','2235BaIQLZ','__importStar','__importDefault','default','logger','../ContactServices/CreateContactService','defineProperty','Failed\x20to\x20write\x20contacts\x20to\x20file:\x20','__createBinding','__esModule','@sentry/node','name','create','stringify','path','20JHVcAF','public','parse','save','contacts','company','contatos_depois.txt','status@broadcast','findOne','error','../BaileysServices/ShowBaileysService','contatos_antes.txt','captureException','isString','getWbot','__setModuleDefault','resolve','../../models/Contact','2003036iaFiqN','writable','../../libs/wbot','187999pttWWP','replace','writeFile','607480XnlCrH','8gfaBfy','1123633kiiFEp','7146TENBai'];a649_0x5e05=function(){return _0x322442;};return a649_0x5e05();}(function(_0x553d4d,_0x257fec){const _0x1e2786=a649_0x4193,_0x187514=_0x553d4d();while(!![]){try{const _0x2da7ca=parseInt(_0x1e2786(0xce))/0x1+-parseInt(_0x1e2786(0xd1))/0x2+parseInt(_0x1e2786(0xd5))/0x3+-parseInt(_0x1e2786(0xcb))/0x4+parseInt(_0x1e2786(0xdd))/0x5*(-parseInt(_0x1e2786(0xd4))/0x6)+-parseInt(_0x1e2786(0xd3))/0x7*(parseInt(_0x1e2786(0xd2))/0x8)+parseInt(_0x1e2786(0xdb))/0x9*(parseInt(_0x1e2786(0xb9))/0xa);if(_0x2da7ca===_0x257fec)break;else _0x187514['push'](_0x187514['shift']());}catch(_0x4da38c){_0x187514['push'](_0x187514['shift']());}}}(a649_0x5e05,0x49443));var __createBinding=this&&this[a649_0xe660fe(0xb2)]||(Object[a649_0xe660fe(0xb6)]?function(_0x2dc6d1,_0x514159,_0x4ed5d6,_0x1b6039){const _0x590f5e=a649_0xe660fe;if(_0x1b6039===undefined)_0x1b6039=_0x4ed5d6;var _0x5986e6=Object[_0x590f5e(0xda)](_0x514159,_0x4ed5d6);(!_0x5986e6||('get'in _0x5986e6?!_0x514159[_0x590f5e(0xb3)]:_0x5986e6[_0x590f5e(0xcc)]||_0x5986e6['configurable']))&&(_0x5986e6={'enumerable':!![],'get':function(){return _0x514159[_0x4ed5d6];}}),Object[_0x590f5e(0xb0)](_0x2dc6d1,_0x1b6039,_0x5986e6);}:function(_0x2f713a,_0x423dfa,_0x528044,_0x59cee2){if(_0x59cee2===undefined)_0x59cee2=_0x528044;_0x2f713a[_0x59cee2]=_0x423dfa[_0x528044];}),__setModuleDefault=this&&this[a649_0xe660fe(0xc8)]||(Object['create']?function(_0x704fcc,_0x22732c){const _0x508eba=a649_0xe660fe;Object['defineProperty'](_0x704fcc,_0x508eba(0xad),{'enumerable':!![],'value':_0x22732c});}:function(_0x4e3720,_0xcb825c){const _0x228ba5=a649_0xe660fe;_0x4e3720[_0x228ba5(0xad)]=_0xcb825c;}),__importStar=this&&this[a649_0xe660fe(0xab)]||function(_0x23fb7b){const _0x4cf507=a649_0xe660fe;if(_0x23fb7b&&_0x23fb7b[_0x4cf507(0xb3)])return _0x23fb7b;var _0x4cbde8={};if(_0x23fb7b!=null){for(var _0x3ab836 in _0x23fb7b)if(_0x3ab836!==_0x4cf507(0xad)&&Object['prototype']['hasOwnProperty'][_0x4cf507(0xdc)](_0x23fb7b,_0x3ab836))__createBinding(_0x4cbde8,_0x23fb7b,_0x3ab836);}return __setModuleDefault(_0x4cbde8,_0x23fb7b),_0x4cbde8;},__importDefault=this&&this[a649_0xe660fe(0xac)]||function(_0x27f515){const _0x2dbee6=a649_0xe660fe;return _0x27f515&&_0x27f515[_0x2dbee6(0xb3)]?_0x27f515:{'default':_0x27f515};};Object[a649_0xe660fe(0xb0)](exports,a649_0xe660fe(0xb3),{'value':!![]});const Sentry=__importStar(require(a649_0xe660fe(0xb4))),GetDefaultWhatsApp_1=__importDefault(require('../../helpers/GetDefaultWhatsApp')),wbot_1=require(a649_0xe660fe(0xcd)),Contact_1=__importDefault(require(a649_0xe660fe(0xca))),logger_1=require(a649_0xe660fe(0xd7)),ShowBaileysService_1=__importDefault(require(a649_0xe660fe(0xc3))),CreateContactService_1=__importDefault(require(a649_0xe660fe(0xaf))),lodash_1=require('lodash'),path_1=__importDefault(require(a649_0xe660fe(0xb8))),fs_1=__importDefault(require('fs')),ImportContactsService=async _0x232044=>{const _0x509ab7=a649_0xe660fe,_0x1cd259=await(0x0,GetDefaultWhatsApp_1[_0x509ab7(0xad)])(_0x232044),_0x24987f=(0x0,wbot_1[_0x509ab7(0xc7)])(_0x1cd259['id']);let _0x52d93b;try{const _0x12d13e=await(0x0,ShowBaileysService_1[_0x509ab7(0xad)])(_0x24987f['id']);_0x52d93b=JSON[_0x509ab7(0xbb)](JSON[_0x509ab7(0xb7)](_0x12d13e[_0x509ab7(0xbd)]));const _0x9ddc2b=path_1[_0x509ab7(0xad)][_0x509ab7(0xc9)](__dirname,'..','..','..',_0x509ab7(0xba)),_0x1e04ba=path_1[_0x509ab7(0xad)][_0x509ab7(0xd8)](_0x9ddc2b,'company'+_0x232044,_0x509ab7(0xc4));fs_1[_0x509ab7(0xad)][_0x509ab7(0xd0)](_0x1e04ba,JSON[_0x509ab7(0xb7)](_0x52d93b,null,0x2),_0x206e11=>{const _0x547522=_0x509ab7;if(_0x206e11){logger_1[_0x547522(0xae)][_0x547522(0xc2)]('Failed\x20to\x20write\x20contacts\x20to\x20file:\x20'+_0x206e11);throw _0x206e11;}});}catch(_0x405f31){Sentry[_0x509ab7(0xc5)](_0x405f31),logger_1[_0x509ab7(0xae)][_0x509ab7(0xc2)]('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x405f31);}const _0x2ad5a3=path_1[_0x509ab7(0xad)][_0x509ab7(0xc9)](__dirname,'..','..','..','public'),_0x2f98b7=path_1[_0x509ab7(0xad)][_0x509ab7(0xd8)](_0x2ad5a3,_0x509ab7(0xbe)+_0x232044,_0x509ab7(0xbf));fs_1[_0x509ab7(0xad)][_0x509ab7(0xd0)](_0x2f98b7,JSON[_0x509ab7(0xb7)](_0x52d93b,null,0x2),_0x41014e=>{const _0x5236a4=_0x509ab7;if(_0x41014e){logger_1[_0x5236a4(0xae)][_0x5236a4(0xc2)](_0x5236a4(0xb1)+_0x41014e);throw _0x41014e;}});const _0x4bf9bb=(0x0,lodash_1[_0x509ab7(0xc6)])(_0x52d93b)?JSON[_0x509ab7(0xbb)](_0x52d93b):_0x52d93b;(0x0,lodash_1[_0x509ab7(0xd9)])(_0x4bf9bb)&&_0x4bf9bb['forEach'](async({id:_0x3df938,name:_0x2dff65,notify:_0x1847ed})=>{const _0x5a5d62=_0x509ab7;if(_0x3df938===_0x5a5d62(0xc0)||_0x3df938[_0x5a5d62(0xd6)]('g.us'))return;const _0x957d56=_0x3df938[_0x5a5d62(0xcf)](/\D/g,''),_0x279ea0=await Contact_1[_0x5a5d62(0xad)][_0x5a5d62(0xc1)]({'where':{'number':_0x957d56,'companyId':_0x232044}});if(_0x279ea0)_0x279ea0[_0x5a5d62(0xb5)]=_0x2dff65||_0x1847ed,await _0x279ea0[_0x5a5d62(0xbc)]();else try{await(0x0,CreateContactService_1[_0x5a5d62(0xad)])({'number':_0x957d56,'name':_0x2dff65||_0x1847ed,'companyId':_0x232044});}catch(_0x4c5ef6){Sentry[_0x5a5d62(0xc5)](_0x4c5ef6),logger_1[_0x5a5d62(0xae)]['warn']('Could\x20not\x20get\x20whatsapp\x20contacts\x20from\x20phone.\x20Err:\x20'+_0x4c5ef6);}});};exports[a649_0xe660fe(0xad)]=ImportContactsService;