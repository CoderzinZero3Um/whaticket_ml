'use strict';function a503_0x5b4e(_0x33d42d,_0x25c501){const _0x43390c=a503_0x4339();return a503_0x5b4e=function(_0x5b4eb5,_0x557348){_0x5b4eb5=_0x5b4eb5-0x1e0;let _0x5184bd=_0x43390c[_0x5b4eb5];return _0x5184bd;},a503_0x5b4e(_0x33d42d,_0x25c501);}function a503_0x4339(){const _0x537ff3=['265vntYOK','__esModule','284348UsLZLp','call','writable','min','upsert','length','getOwnPropertyDescriptor','ERR_RATING_NAME_ALREADY_EXISTS','Check-unique-name','../../models/FilesOptions','252070XNeBic','9aSlmIN','message','9cXvJym','string','findOne','1170848FODJEk','hasOwnProperty','default','defineProperty','../../errors/AppError','prototype','validate','3019212hgeCRc','__importDefault','../../models/Files','__createBinding','./ShowService','yup','shape','test','238467sTItbb','55254UoqKAe','object','6116020FuKJSr','create'];a503_0x4339=function(){return _0x537ff3;};return a503_0x4339();}const a503_0x3047fa=a503_0x5b4e;(function(_0x4f6968,_0x1889b9){const _0x168bec=a503_0x5b4e,_0x2d8e65=_0x4f6968();while(!![]){try{const _0x2114aa=-parseInt(_0x168bec(0x1f3))/0x1+parseInt(_0x168bec(0x204))/0x2+-parseInt(_0x168bec(0x1e1))/0x3*(-parseInt(_0x168bec(0x1fa))/0x4)+parseInt(_0x168bec(0x1f8))/0x5*(parseInt(_0x168bec(0x1f4))/0x6)+parseInt(_0x168bec(0x1eb))/0x7+-parseInt(_0x168bec(0x1e4))/0x8*(parseInt(_0x168bec(0x205))/0x9)+-parseInt(_0x168bec(0x1f6))/0xa;if(_0x2114aa===_0x1889b9)break;else _0x2d8e65['push'](_0x2d8e65['shift']());}catch(_0x1df197){_0x2d8e65['push'](_0x2d8e65['shift']());}}}(a503_0x4339,0x40078));var __createBinding=this&&this[a503_0x3047fa(0x1ee)]||(Object[a503_0x3047fa(0x1f7)]?function(_0x2a2cc1,_0x3614c2,_0x419d89,_0x449fff){const _0x150067=a503_0x3047fa;if(_0x449fff===undefined)_0x449fff=_0x419d89;var _0x173530=Object[_0x150067(0x200)](_0x3614c2,_0x419d89);(!_0x173530||('get'in _0x173530?!_0x3614c2[_0x150067(0x1f9)]:_0x173530[_0x150067(0x1fc)]||_0x173530['configurable']))&&(_0x173530={'enumerable':!![],'get':function(){return _0x3614c2[_0x419d89];}}),Object[_0x150067(0x1e7)](_0x2a2cc1,_0x449fff,_0x173530);}:function(_0x2fe916,_0x3d2c3d,_0x382e5a,_0x4d6194){if(_0x4d6194===undefined)_0x4d6194=_0x382e5a;_0x2fe916[_0x4d6194]=_0x3d2c3d[_0x382e5a];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object['create']?function(_0x3c4977,_0x318222){const _0x19a9ef=a503_0x3047fa;Object[_0x19a9ef(0x1e7)](_0x3c4977,_0x19a9ef(0x1e6),{'enumerable':!![],'value':_0x318222});}:function(_0x362f7e,_0x4b55fd){const _0x4e51d4=a503_0x3047fa;_0x362f7e[_0x4e51d4(0x1e6)]=_0x4b55fd;}),__importStar=this&&this['__importStar']||function(_0x5d56a6){const _0x50fc6f=a503_0x3047fa;if(_0x5d56a6&&_0x5d56a6[_0x50fc6f(0x1f9)])return _0x5d56a6;var _0x3c4e1c={};if(_0x5d56a6!=null){for(var _0x30d938 in _0x5d56a6)if(_0x30d938!==_0x50fc6f(0x1e6)&&Object[_0x50fc6f(0x1e9)][_0x50fc6f(0x1e5)][_0x50fc6f(0x1fb)](_0x5d56a6,_0x30d938))__createBinding(_0x3c4e1c,_0x5d56a6,_0x30d938);}return __setModuleDefault(_0x3c4e1c,_0x5d56a6),_0x3c4e1c;},__importDefault=this&&this[a503_0x3047fa(0x1ec)]||function(_0x24da98){return _0x24da98&&_0x24da98['__esModule']?_0x24da98:{'default':_0x24da98};};Object[a503_0x3047fa(0x1e7)](exports,a503_0x3047fa(0x1f9),{'value':!![]});const Yup=__importStar(require(a503_0x3047fa(0x1f0))),AppError_1=__importDefault(require(a503_0x3047fa(0x1e8))),Files_1=__importDefault(require(a503_0x3047fa(0x1ed))),FilesOptions_1=__importDefault(require(a503_0x3047fa(0x203))),ShowService_1=__importDefault(require(a503_0x3047fa(0x1ef))),CreateService=async({name:_0x4a678c,message:_0x504a33,companyId:_0x1ff045,options:_0x10062b})=>{const _0x332542=a503_0x3047fa,_0x16060c=Yup[_0x332542(0x1f5)]()[_0x332542(0x1f1)]({'name':Yup[_0x332542(0x1e2)]()['required']()[_0x332542(0x1fd)](0x3)[_0x332542(0x1f2)](_0x332542(0x202),_0x332542(0x201),async _0x1e8b14=>{const _0x449d0f=_0x332542;if(_0x1e8b14){const _0x14ee2c=await Files_1['default'][_0x449d0f(0x1e3)]({'where':{'name':_0x1e8b14,'companyId':_0x1ff045}});return!_0x14ee2c;}return![];})});try{await _0x16060c[_0x332542(0x1ea)]({'name':_0x4a678c});}catch(_0x559574){throw new AppError_1[(_0x332542(0x1e6))](_0x559574[_0x332542(0x1e0)]);}let _0x37e704=await Files_1[_0x332542(0x1e6)][_0x332542(0x1f7)]({'name':_0x4a678c,'message':_0x504a33,'companyId':_0x1ff045});return _0x10062b&&_0x10062b[_0x332542(0x1ff)]>0x0&&await Promise['all'](_0x10062b['map'](async _0x94e730=>{const _0x2b65bb=_0x332542;await FilesOptions_1[_0x2b65bb(0x1e6)][_0x2b65bb(0x1fe)]({..._0x94e730,'fileId':_0x37e704['id']});})),_0x37e704=await(0x0,ShowService_1['default'])(_0x37e704['id'],_0x1ff045),_0x37e704;};exports[a503_0x3047fa(0x1e6)]=CreateService;