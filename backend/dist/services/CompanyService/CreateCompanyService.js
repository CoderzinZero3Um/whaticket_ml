'use strict';const a451_0x1aa63c=a451_0x4270;(function(_0x5e9ebb,_0x353ce){const _0x965ca8=a451_0x4270,_0x17e274=_0x5e9ebb();while(!![]){try{const _0x12131c=-parseInt(_0x965ca8(0xff))/0x1*(parseInt(_0x965ca8(0x110))/0x2)+parseInt(_0x965ca8(0xf2))/0x3*(parseInt(_0x965ca8(0x10c))/0x4)+parseInt(_0x965ca8(0x113))/0x5*(-parseInt(_0x965ca8(0x10b))/0x6)+parseInt(_0x965ca8(0x116))/0x7*(parseInt(_0x965ca8(0xee))/0x8)+-parseInt(_0x965ca8(0x117))/0x9+-parseInt(_0x965ca8(0x10a))/0xa+-parseInt(_0x965ca8(0x100))/0xb*(-parseInt(_0x965ca8(0xfe))/0xc);if(_0x12131c===_0x353ce)break;else _0x17e274['push'](_0x17e274['shift']());}catch(_0x234770){_0x17e274['push'](_0x17e274['shift']());}}}(a451_0xfd91,0xf1782));function a451_0xfd91(){const _0x3cefde=['__setModuleDefault','transaction','configurable','required','string','../../models/Company','commit','admin','mudar123','rollback','22692PhppkY','12058FVfaNs','21219VaPYNv','../../database','defineProperty','default','validate','getOwnPropertyDescriptor','email','shape','__createBinding','prototype','13180570vwVPvQ','1038LORgnl','164aUzVYD','../../errors/AppError','../../models/CompaniesSettings','create','200zkpoFA','object','disabled','42495aZylhq','min','yup','309729JZyhlN','12087459nphogk','enabled','__importDefault','__importStar','9999999999','352oVvGmq','get','ERR_COMPANY_INVALID_NAME','writable','53538QKRFRJ','__esModule'];a451_0xfd91=function(){return _0x3cefde;};return a451_0xfd91();}var __createBinding=this&&this[a451_0x1aa63c(0x108)]||(Object['create']?function(_0x563e52,_0x21688d,_0x3486ca,_0x567b48){const _0x3decb7=a451_0x1aa63c;if(_0x567b48===undefined)_0x567b48=_0x3486ca;var _0x27929f=Object[_0x3decb7(0x105)](_0x21688d,_0x3486ca);(!_0x27929f||(_0x3decb7(0xef)in _0x27929f?!_0x21688d['__esModule']:_0x27929f[_0x3decb7(0xf1)]||_0x27929f[_0x3decb7(0xf6)]))&&(_0x27929f={'enumerable':!![],'get':function(){return _0x21688d[_0x3486ca];}}),Object[_0x3decb7(0x102)](_0x563e52,_0x567b48,_0x27929f);}:function(_0x5d6eb9,_0x3f9cc7,_0x1d010b,_0x1e90b0){if(_0x1e90b0===undefined)_0x1e90b0=_0x1d010b;_0x5d6eb9[_0x1e90b0]=_0x3f9cc7[_0x1d010b];}),__setModuleDefault=this&&this[a451_0x1aa63c(0xf4)]||(Object['create']?function(_0x422fbe,_0x478101){const _0x169a45=a451_0x1aa63c;Object[_0x169a45(0x102)](_0x422fbe,'default',{'enumerable':!![],'value':_0x478101});}:function(_0x4d8d33,_0x128af4){const _0x3de634=a451_0x1aa63c;_0x4d8d33[_0x3de634(0x103)]=_0x128af4;}),__importStar=this&&this[a451_0x1aa63c(0x11a)]||function(_0x583806){const _0x241e90=a451_0x1aa63c;if(_0x583806&&_0x583806[_0x241e90(0xf3)])return _0x583806;var _0x3a15ab={};if(_0x583806!=null){for(var _0x2e38c2 in _0x583806)if(_0x2e38c2!==_0x241e90(0x103)&&Object[_0x241e90(0x109)]['hasOwnProperty']['call'](_0x583806,_0x2e38c2))__createBinding(_0x3a15ab,_0x583806,_0x2e38c2);}return __setModuleDefault(_0x3a15ab,_0x583806),_0x3a15ab;},__importDefault=this&&this[a451_0x1aa63c(0x119)]||function(_0x172474){const _0x5e28ec=a451_0x1aa63c;return _0x172474&&_0x172474[_0x5e28ec(0xf3)]?_0x172474:{'default':_0x172474};};function a451_0x4270(_0x8ec9c0,_0x1ae05b){const _0xfd91d1=a451_0xfd91();return a451_0x4270=function(_0x427078,_0x487491){_0x427078=_0x427078-0xee;let _0x1b9ba7=_0xfd91d1[_0x427078];return _0x1b9ba7;},a451_0x4270(_0x8ec9c0,_0x1ae05b);}Object[a451_0x1aa63c(0x102)](exports,a451_0x1aa63c(0xf3),{'value':!![]});const Yup=__importStar(require(a451_0x1aa63c(0x115))),AppError_1=__importDefault(require(a451_0x1aa63c(0x10d))),Company_1=__importDefault(require(a451_0x1aa63c(0xf9))),User_1=__importDefault(require('../../models/User')),database_1=__importDefault(require(a451_0x1aa63c(0x101))),CompaniesSettings_1=__importDefault(require(a451_0x1aa63c(0x10e))),CreateCompanyService=async _0x185343=>{const _0x495e0b=a451_0x1aa63c,{name:_0x2e031a,phone:_0x36846d,password:_0x1ad2ba,email:_0x50ecdb,status:_0x3fc42b,planId:_0x36d3f7,dueDate:_0x3e573f,recurrence:_0x23182a,document:_0x324d6c,paymentMethod:_0x1e6d22,companyUserName:_0x507ae6}=_0x185343,_0x42599b=Yup[_0x495e0b(0x111)]()[_0x495e0b(0x107)]({'name':Yup[_0x495e0b(0xf8)]()[_0x495e0b(0x114)](0x2,'ERR_COMPANY_INVALID_NAME')[_0x495e0b(0xf7)](_0x495e0b(0xf0))});try{await _0x42599b[_0x495e0b(0x104)]({'name':_0x2e031a});}catch(_0x286992){throw new AppError_1[(_0x495e0b(0x103))](_0x286992['message']);}const _0x21ff48=await database_1[_0x495e0b(0x103)][_0x495e0b(0xf5)]();try{const _0x5ae881=await Company_1[_0x495e0b(0x103)][_0x495e0b(0x10f)]({'name':_0x2e031a,'phone':_0x36846d,'email':_0x50ecdb,'status':_0x3fc42b,'planId':_0x36d3f7,'dueDate':_0x3e573f,'recurrence':_0x23182a,'document':_0x324d6c,'paymentMethod':_0x1e6d22},{'transaction':_0x21ff48}),_0x372b4b=await User_1[_0x495e0b(0x103)][_0x495e0b(0x10f)]({'name':_0x507ae6?_0x507ae6:_0x2e031a,'email':_0x5ae881[_0x495e0b(0x106)],'password':_0x1ad2ba?_0x1ad2ba:_0x495e0b(0xfc),'profile':_0x495e0b(0xfb),'companyId':_0x5ae881['id']},{'transaction':_0x21ff48}),_0x2e8ed1=await CompaniesSettings_1[_0x495e0b(0x103)]['create']({'companyId':_0x5ae881['id'],'hoursCloseTicketsAuto':_0x495e0b(0x11b),'chatBotType':'text','acceptCallWhatsapp':'enabled','userRandom':_0x495e0b(0x118),'sendGreetingMessageOneQueues':_0x495e0b(0x118),'sendSignMessage':_0x495e0b(0x118),'sendFarewellWaitingTicket':_0x495e0b(0x112),'userRating':_0x495e0b(0x112),'sendGreetingAccepted':'enabled','CheckMsgIsGroup':_0x495e0b(0x118),'sendQueuePosition':_0x495e0b(0x112),'scheduleType':_0x495e0b(0x112),'acceptAudioMessageContact':_0x495e0b(0x118),'sendMsgTransfTicket':'disabled','enableLGPD':_0x495e0b(0x112),'requiredTag':_0x495e0b(0x112),'lgpdDeleteMessage':'disabled','lgpdHideNumber':_0x495e0b(0x112),'lgpdConsent':'disabled','lgpdLink':'','lgpdMessage':'','createdAt':new Date(),'updatedAt':new Date(),'closeTicketOnTransfer':![],'DirectTicketsToWallets':![]},{'transaction':_0x21ff48});return await _0x21ff48[_0x495e0b(0xfa)](),_0x5ae881;}catch(_0x1f2ade){await _0x21ff48[_0x495e0b(0xfd)]();throw new AppError_1[(_0x495e0b(0x103))]('Não\x20foi\x20possível\x20criar\x20a\x20empresa!',_0x1f2ade);}};exports[a451_0x1aa63c(0x103)]=CreateCompanyService;