'use strict';const a669_0x56a57c=a669_0x2ae2;(function(_0x58c66c,_0x13b180){const _0x1124ad=a669_0x2ae2,_0x3de19f=_0x58c66c();while(!![]){try{const _0x16428b=parseInt(_0x1124ad(0xa5))/0x1+-parseInt(_0x1124ad(0x93))/0x2*(parseInt(_0x1124ad(0x88))/0x3)+-parseInt(_0x1124ad(0x90))/0x4+parseInt(_0x1124ad(0x82))/0x5*(-parseInt(_0x1124ad(0x8f))/0x6)+parseInt(_0x1124ad(0x89))/0x7+-parseInt(_0x1124ad(0x9b))/0x8*(parseInt(_0x1124ad(0x9d))/0x9)+parseInt(_0x1124ad(0x98))/0xa;if(_0x16428b===_0x13b180)break;else _0x3de19f['push'](_0x3de19f['shift']());}catch(_0x15a7ed){_0x3de19f['push'](_0x3de19f['shift']());}}}(a669_0x343b,0xa8322));var __createBinding=this&&this[a669_0x56a57c(0x87)]||(Object['create']?function(_0x2c5337,_0x78f4c4,_0x31032a,_0x1b3305){const _0x2467a0=a669_0x56a57c;if(_0x1b3305===undefined)_0x1b3305=_0x31032a;var _0x320aa0=Object[_0x2467a0(0xa2)](_0x78f4c4,_0x31032a);(!_0x320aa0||(_0x2467a0(0xa1)in _0x320aa0?!_0x78f4c4[_0x2467a0(0x92)]:_0x320aa0[_0x2467a0(0x85)]||_0x320aa0[_0x2467a0(0x9e)]))&&(_0x320aa0={'enumerable':!![],'get':function(){return _0x78f4c4[_0x31032a];}}),Object[_0x2467a0(0x8c)](_0x2c5337,_0x1b3305,_0x320aa0);}:function(_0x895463,_0x27ed2a,_0x2342d2,_0x4f54bf){if(_0x4f54bf===undefined)_0x4f54bf=_0x2342d2;_0x895463[_0x4f54bf]=_0x27ed2a[_0x2342d2];}),__setModuleDefault=this&&this[a669_0x56a57c(0x9f)]||(Object[a669_0x56a57c(0x8e)]?function(_0x6fe490,_0x5c35ea){const _0x30580b=a669_0x56a57c;Object[_0x30580b(0x8c)](_0x6fe490,_0x30580b(0x86),{'enumerable':!![],'value':_0x5c35ea});}:function(_0xb32ed8,_0x1fb4ea){const _0xcf7108=a669_0x56a57c;_0xb32ed8[_0xcf7108(0x86)]=_0x1fb4ea;}),__importStar=this&&this[a669_0x56a57c(0x83)]||function(_0x35348b){const _0x483f92=a669_0x56a57c;if(_0x35348b&&_0x35348b[_0x483f92(0x92)])return _0x35348b;var _0x4973d1={};if(_0x35348b!=null){for(var _0x1bbbe0 in _0x35348b)if(_0x1bbbe0!==_0x483f92(0x86)&&Object[_0x483f92(0x80)][_0x483f92(0x91)][_0x483f92(0x99)](_0x35348b,_0x1bbbe0))__createBinding(_0x4973d1,_0x35348b,_0x1bbbe0);}return __setModuleDefault(_0x4973d1,_0x35348b),_0x4973d1;},__importDefault=this&&this[a669_0x56a57c(0x9c)]||function(_0xe92442){const _0x3d3e90=a669_0x56a57c;return _0xe92442&&_0xe92442[_0x3d3e90(0x92)]?_0xe92442:{'default':_0xe92442};};function a669_0x343b(){const _0x52230e=['4177700YcGzFe','hasOwnProperty','__esModule','2rgZgyh','string','./ShowWhatsAppService','sequelize','message','30723110CSHYZD','call','not','5704TABiKK','__importDefault','1746LUNiLi','configurable','__setModuleDefault','../../models/Whatsapp','get','getOwnPropertyDescriptor','findOne','object','540570pQWDNI','min','validate','prototype','update','15vZCbWg','__importStar','length','writable','default','__createBinding','3457221gcXYdh','3440647nDOvki','ERR_WAPP_GREETING_REQUIRED','shape','defineProperty','../../errors/AppError','create','2160636CmnvIl'];a669_0x343b=function(){return _0x52230e;};return a669_0x343b();}function a669_0x2ae2(_0x32add5,_0x553528){const _0x343bac=a669_0x343b();return a669_0x2ae2=function(_0x2ae295,_0x51e90d){_0x2ae295=_0x2ae295-0x7e;let _0x469fcd=_0x343bac[_0x2ae295];return _0x469fcd;},a669_0x2ae2(_0x32add5,_0x553528);}Object[a669_0x56a57c(0x8c)](exports,a669_0x56a57c(0x92),{'value':!![]});const Yup=__importStar(require('yup')),sequelize_1=require(a669_0x56a57c(0x96)),AppError_1=__importDefault(require(a669_0x56a57c(0x8d))),Whatsapp_1=__importDefault(require(a669_0x56a57c(0xa0))),ShowWhatsAppService_1=__importDefault(require(a669_0x56a57c(0x95))),AssociateWhatsappQueue_1=__importDefault(require('./AssociateWhatsappQueue')),UpdateWhatsAppService=async({whatsappData:_0x32e810,whatsappId:_0x37a972,companyId:_0x4f31e8})=>{const _0x2913aa=a669_0x56a57c,_0x279ced=Yup[_0x2913aa(0xa4)]()[_0x2913aa(0x8b)]({'name':Yup[_0x2913aa(0x94)]()[_0x2913aa(0x7e)](0x2),'status':Yup[_0x2913aa(0x94)](),'isDefault':Yup['boolean']()}),{name:_0x55729a,status:_0x2f9465,isDefault:_0xf5e0ae,session:_0x5536f8,greetingMessage:_0x29b3d4,complationMessage:_0x3e0ad7,outOfHoursMessage:_0x199532,queueIds:queueIds=[],token:_0x5f4cff,maxUseBotQueues:maxUseBotQueues=0x0,timeUseBotQueues:timeUseBotQueues=0x0,expiresTicket:expiresTicket=0x0,allowGroup:_0x493d70,timeSendQueue:timeSendQueue=0x0,sendIdQueue:sendIdQueue=null,timeInactiveMessage:timeInactiveMessage=0x0,inactiveMessage:_0x1a917c,ratingMessage:_0x29da3f,maxUseBotQueuesNPS:_0x5f329f,expiresTicketNPS:expiresTicketNPS=0x0,whenExpiresTicket:_0x235a54,expiresInactiveMessage:_0xf3ad6b,groupAsTicket:_0x37a5c2,importOldMessages:_0x5ab747,importRecentMessages:_0x1cdca8,closedTicketsPostImported:_0x49acce,importOldMessagesGroups:_0x109650,timeCreateNewTicket:timeCreateNewTicket=null,integrationId:_0x29f229,schedules:_0x31ffe3,promptId:_0x5a0a29,requestQR:requestQR=![],collectiveVacationEnd:_0x573a0f,collectiveVacationMessage:_0x988db2,collectiveVacationStart:_0x3ceea9}=_0x32e810;try{await _0x279ced[_0x2913aa(0x7f)]({'name':_0x55729a,'status':_0x2f9465,'isDefault':_0xf5e0ae});}catch(_0x861f42){throw new AppError_1[(_0x2913aa(0x86))](_0x861f42[_0x2913aa(0x97)]);}if(queueIds[_0x2913aa(0x84)]>0x1&&!_0x29b3d4)throw new AppError_1[(_0x2913aa(0x86))](_0x2913aa(0x8a));let _0x2b9ab1=null;_0xf5e0ae&&(_0x2b9ab1=await Whatsapp_1[_0x2913aa(0x86)][_0x2913aa(0xa3)]({'where':{'isDefault':!![],'id':{[sequelize_1['Op'][_0x2913aa(0x9a)]]:_0x37a972},'companyId':_0x4f31e8}}),_0x2b9ab1&&await _0x2b9ab1['update']({'isDefault':![]}));const _0x1f2742=await(0x0,ShowWhatsAppService_1[_0x2913aa(0x86)])(_0x37a972,_0x4f31e8);return await _0x1f2742[_0x2913aa(0x81)]({'name':_0x55729a,'status':_0x2f9465,'session':_0x5536f8,'greetingMessage':_0x29b3d4,'complationMessage':_0x3e0ad7,'outOfHoursMessage':_0x199532,'isDefault':_0xf5e0ae,'companyId':_0x4f31e8,'token':_0x5f4cff,'maxUseBotQueues':maxUseBotQueues||0x0,'timeUseBotQueues':timeUseBotQueues||0x0,'expiresTicket':expiresTicket||0x0,'allowGroup':_0x493d70,'timeSendQueue':timeSendQueue,'sendIdQueue':sendIdQueue,'timeInactiveMessage':timeInactiveMessage,'inactiveMessage':_0x1a917c,'ratingMessage':_0x29da3f,'maxUseBotQueuesNPS':_0x5f329f,'expiresTicketNPS':expiresTicketNPS,'whenExpiresTicket':_0x235a54,'expiresInactiveMessage':_0xf3ad6b,'groupAsTicket':_0x37a5c2,'importOldMessages':_0x5ab747,'importRecentMessages':_0x1cdca8,'closedTicketsPostImported':_0x49acce,'importOldMessagesGroups':_0x109650,'timeCreateNewTicket':timeCreateNewTicket,'integrationId':_0x29f229,'schedules':_0x31ffe3,'promptId':_0x5a0a29,'collectiveVacationEnd':_0x573a0f,'collectiveVacationMessage':_0x988db2,'collectiveVacationStart':_0x3ceea9}),!requestQR&&await(0x0,AssociateWhatsappQueue_1['default'])(_0x1f2742,queueIds),{'whatsapp':_0x1f2742,'oldDefaultWhatsapp':_0x2b9ab1};};exports[a669_0x56a57c(0x86)]=UpdateWhatsAppService;